{% extends "base.html" %}
{% block main_content %}
<style>
    body {
        padding: 1rem;
    }
</style>
<link rel="stylesheet" href="{{ get_url(path='/css/index.css') }}">
<script>
document.addEventListener('click', function(event) {
    const link = event.target.closest('a');
    if (link && link.href && link.href.includes('/pdf-viewer/')) {
        event.preventDefault();
        
        // Check session exists
        const sessionData = sessionStorage.getItem('user_session');
        if (!sessionData) {
            window.location.href = '/';
            return;
        }

        try {
            const session = JSON.parse(sessionData);
            const now = new Date();
            const expiresAt = new Date(session.expiresAt);
            
            if (now >= expiresAt) {
                window.location.href = '/';
                return;
            }

            // Open PDF viewer with file path and title
            const url = new URL(link.href);
            const cleanUrl = new URL(url.origin + url.pathname);
            cleanUrl.searchParams.set('file', url.searchParams.get('file'));
            cleanUrl.searchParams.set('title', link.innerText);
            
            window.open(cleanUrl.href, '_blank');
        } catch (error) {
            window.location.href = '/';
        }
    }
});
</script>
<script>
    // Close all child <details> when a parent <details> is closed
    document.addEventListener('DOMContentLoaded', function () {
        document.querySelectorAll('details').forEach(function (details) {
            details.addEventListener('toggle', function () {
                if (!details.open) {
                    details.querySelectorAll('details').forEach(function (child) {
                        child.open = false;
                    });
                }
            });
        });
    });
</script>
<div class="parent-parent">
    <ul class="parent" style="list-style-type: none;">
        <li>{% include 'web_design.html' %}</li>
    </ul>
</div>    
{% endblock %}